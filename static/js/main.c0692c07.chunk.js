(this["webpackJsonpbom-management"]=this["webpackJsonpbom-management"]||[]).push([[0],{161:function(e,t,a){e.exports=a(183)},166:function(e,t,a){},173:function(e,t,a){e.exports=a.p+"static/media/bom-logo.52fa552e.png"},183:function(e,t,a){"use strict";a.r(t);var n,r,l=a(0),i=a.n(l),c=a(17),o=a.n(c),u=(a(166),a(131)),s=a(274),d=a(10),m=a.n(d),p=a(15),f=a(7),v=a(118),b=a(134),E=a(135),h=a(6),g=a(50),y=a(102),x=a(119),O=a(120),j=function(){function e(t){Object(y.a)(this,e),this.idToken=t,this.baseUrl=void 0,this.idToken=t,this.baseUrl="us-east1-black-owned-maine-app.cloudfunctions.net/bom-services"}return Object(x.a)(e,[{key:"verifyToken",value:function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.makeRequest(this.buildUrl("verify")));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchServices",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,r,l=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:{useCache:!0},a=t.useCache,r=Object(g.a)(t,["useCache"]),n){e.next=5;break}return e.next=4,this.makeRequest(this.buildUrl("services",{limit:99999999}));case 4:n=e.sent;case 5:if(!a){e.next=9;break}e.t0=n,e.next=12;break;case 9:return e.next=11,this.makeRequest(this.buildUrl("services",r));case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteBusiness",value:function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest(this.buildUrl("services/".concat(t)),{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFeed",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.assign({},t),e.next=3,this.makeRequest(this.buildUrl("feed",a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchArticle",value:function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest(this.buildUrl("feed/".concat(t)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFeedEntry",value:function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest(this.buildUrl("feed/".concat(t)),{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCategories",value:function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Array,e.t1=Set,e.next=4,this.fetchServices({limit:1e4});case 4:return e.t2=e.sent.flatMap((function(e){return e.categories})),e.t3=new e.t1(e.t2),e.abrupt("return",e.t0.from.call(e.t0,e.t3).sort());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLocations",value:function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Array,e.t1=Set,e.next=4,this.fetchServices({limit:1e4});case 4:return e.t2=e.sent.flatMap((function(e){return e.location})),e.t3=new e.t1(e.t2),e.abrupt("return",e.t0.from.call(e.t0,e.t3));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadBusinesses",value:function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest(this.buildUrl("services"),{method:"PUT",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadNewsfeedEntries",value:function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest(this.buildUrl("feed"),{method:"PUT",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertExcel",value:function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest(this.buildUrl("convert/excel"),{method:"POST",body:JSON.stringify({content:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateService",value:function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest(this.buildUrl("validate"),{method:"POST",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchUsers",value:function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest(this.buildUrl("users"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"putUsers",value:function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest(this.buildUrl("users"),{method:"PUT",body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"makeRequest",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,r,l=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=l.length>1&&void 0!==l[1]?l[1]:{}).headers||(a.headers={}),a.headers=Object(h.a)({Authorization:a.headers.authorization||"Bearer ".concat(this.idToken),Accept:"application/json","Content-Type":"application/json"},a.headers),e.next=5,fetch(t,a);case 5:return n=e.sent,e.prev=6,e.next=9,n.json();case 9:r=e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:if(!(n.status>=200&&n.status<300)){e.next=18;break}return e.abrupt("return",r);case 18:throw new k(n.status,r);case 19:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"buildUrl",value:function(e,t){var a="https://".concat(O.join(this.baseUrl,e));if(t){var n=Object.keys(t).filter((function(e){return"undefined"!==typeof t[e]})).map((function(e){return"".concat(e,"=").concat(encodeURI(t[e]))})).join("&");a+="?".concat(n)}return a}}]),e}(),k=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e,n){var r;return Object(y.a)(this,a),(r=t.call(this,"Status code error: ".concat(e).concat(n?": ".concat(JSON.stringify(n)):""))).status=e,r.body=n,r}return a}(Object(E.a)(Error)),S=!1,C=function(){var e,t;return null===(e=window.gapi)||void 0===e||null===(t=e.auth2)||void 0===t?void 0:t.getAuthInstance()},w=i.a.createContext(void 0),N=function(e){var t,a=null===(t=e.currentUser)||void 0===t?void 0:t.get();if(a)for(var n=0,r=Object.keys(a);n<r.length;n++){var l=r[n];if(a[l]&&a[l].id_token)return a[l]}},U=function(e){var t=i.a.useState(!1),a=Object(f.a)(t,2),n=a[0],r=a[1],l=i.a.useState(!0),c=Object(f.a)(l,2),o=c[0],u=c[1],s=i.a.useState(),d=Object(f.a)(s,2),v=d[0],b=d[1],E=i.a.useState(),h=Object(f.a)(E,2),g=h[0],y=h[1],x=i.a.useState(new j("")),O=Object(f.a)(x,2),k=O[0],U=O[1],_=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Handling login at ".concat((new Date).toLocaleString())),u(!0),a=new j(t.id_token);try{U(a),b(t),u(!1),r(!0)}catch(n){T(n)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){console.log("Login error at ".concat((new Date).toLocaleString(),": ").concat(JSON.stringify(e))),b(void 0),r(!1),u(!1)};i.a.useEffect((function(){(S?Promise.resolve():new Promise((function(e,t){var a;null===(a=window.gapi)||void 0===a||a.load("client:auth2",(function(){window.gapi.client.init({clientId:"1040972232924-3jkml471q8dan5gpdjcb0f1efou71l0n.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive"}).then((function(){S=!0,e()})).catch((function(e){t(e)}))}))}))).then(Object(p.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:if(n=e.sent,null===(t=n.isSignedIn)||void 0===t||t.listen(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,_(N(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!(null===(a=n.isSignedIn)||void 0===a?void 0:a.get())){e.next=9;break}return e.next=7,_(N(n));case 7:e.next=10;break;case 9:u(!1);case 10:case"end":return e.stop()}}),e)}))))}),[]);return i.a.createElement(w.Provider,{value:{authenticated:n,userRole:g,userCredentials:v,authorizing:o,adminServices:k,signOut:function(){window.gapi.auth2.getAuthInstance().signOut(),r(!1),u(!1),b(void 0),y(void 0)},signIn:function(){window.gapi.auth2.getAuthInstance().signIn({prompt:"select_account"})}}},e.children)},_=a(20),T=function(e){var t=e.component,a=e.allowedRoles,n=void 0===a?[]:a,r=Object(g.a)(e,["component","allowedRoles"]),l=i.a.useContext(w);return i.a.createElement(_.b,Object.assign({},r,{render:function(e){return l.authenticated?!n||0===n.length||n.includes(l.userRole)?i.a.createElement(t,e):i.a.createElement(_.a,{to:{pathname:"/home",state:{from:e.location}}}):i.a.createElement(_.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},L=function(e){var t=e.noRedirect,a=e.component,n=Object(g.a)(e,["noRedirect","component"]),r=i.a.useContext(w);return i.a.createElement(_.b,Object.assign({},n,{render:function(e){return!r.authenticated||t?i.a.createElement(a,e):i.a.createElement(_.a,{to:{pathname:"/",state:{from:e.location}}})}}))},I=a(226),R=a(229),A=a(230),D={background:"#181819",cardBackground:"#2b2828",text:"#cfcfcf",divider:"#3e3e3e",lightGray:"#747474",gray:"#3e3e3e",darkGray:"#181819",lightAccent:"#e9a825",darkAccent:"#FF9800",font:"#ffffff",altAccent:"#4CA9B4",lightRed:"#d74b4b"},B=Object(I.a)({root:{height:"100%",width:"100%",backgroundColor:D.background},wrapper:{paddingTop:"50px",display:"flex",alignItems:"center",justifyContent:"center"},card:{backgroundColor:D.background,margin:"30px"},labelWrapper:{marginTop:"30px",marginBottom:"30px",color:D.text}}),M=function(){var e=i.a.useContext(w),t=B();return i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.wrapper},i.a.createElement("img",{alt:"Black Owned Maine",src:a(173)})),e.authorizing?i.a.createElement("div",{className:t.wrapper},i.a.createElement(R.a,{size:80})):i.a.createElement("div",{className:t.wrapper},i.a.createElement("div",{className:t.labelWrapper})),i.a.createElement("div",{className:t.wrapper},i.a.createElement(A.a,{disabled:e.authorizing,variant:"outlined",onClick:e.signIn},"Login with Google")))},F=a(34),W=a(26),q=a(287),V=a(187),P=a(231),H=a(232),z=a(109),J=a(233),K=a(234),G=a(235),Y=a(236),$=a(237),Q=function(e){var t=Object(P.a)(Object(W.a)().breakpoints.down("xs"));return i.a.createElement(H.a,{component:z.a,style:{height:"100%"}},i.a.createElement(J.a,{stickyHeader:!0,"aria-label":"sticky table"},i.a.createElement(K.a,null,i.a.createElement(G.a,null,i.a.createElement(Y.a,null,"Name"),!t&&i.a.createElement(Y.a,null,"Locations"),!t&&i.a.createElement(Y.a,null,"Categories"),!t&&i.a.createElement(Y.a,null,"Last Modified"))),i.a.createElement($.a,null,e.businesses.map((function(a){return i.a.createElement(G.a,{style:{cursor:"default"},hover:"undefined"!==typeof e.onSelectBusiness,key:a.name,onClick:function(){return e.onSelectBusiness&&e.onSelectBusiness(a)}},i.a.createElement(Y.a,{component:"th",scope:"row"},a.name),!t&&i.a.createElement(Y.a,null,a.location.join(", ")),!t&&i.a.createElement(Y.a,null,a.categories.join(", ")),!t&&i.a.createElement(Y.a,null,new Date(a.lastModified).toLocaleString()))})))))},X=a(238),Z=a(283),ee=a(121),te=a.n(ee),ae=Object(I.a)({root:{maxWidth:"400px",display:"flex",alignItems:"center",marginBottom:"5px"},input:{marginLeft:"10px",flex:4},icon:{}}),ne=function(e){var t=i.a.useState(),a=Object(f.a)(t,2),n=a[0],r=a[1],l=ae();return i.a.createElement("div",{style:e.rootStyles,className:l.root},i.a.createElement("form",{onSubmit:function(t){var a;t.preventDefault(),null===(a=e.onSubmit)||void 0===a||a.call(e,n)}},i.a.createElement(X.a,{container:!0,spacing:1,alignItems:"flex-end"},i.a.createElement(X.a,{item:!0},i.a.createElement(te.a,{color:"secondary"})),i.a.createElement(X.a,{item:!0},i.a.createElement(Z.a,{color:"secondary",id:"input-with-icon-grid",label:"Search",value:n,onChange:function(t){var a;r(t.target.value),null===(a=e.onChange)||void 0===a||a.call(e,t.target.value)}})))))},re=a(136),le=Object(I.a)((function(e){return{root:{margin:"15px",maxHeight:"70vh"},header:Object(F.a)({display:"flex",alignItems:"center"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start"})}})),ie=function(){var e=Object(_.g)(),t=i.a.useState([]),a=Object(f.a)(t,2),n=a[0],r=a[1],l=i.a.useState(!0),c=Object(f.a)(l,2),o=c[0],u=c[1],s=i.a.useState(25),d=Object(f.a)(s,2),m=d[0],p=d[1],v=i.a.useState(0),b=Object(f.a)(v,2),E=b[0],h=b[1],g=i.a.useState([]),y=Object(f.a)(g,2),x=y[0],O=y[1],j=i.a.useState(-1),k=Object(f.a)(j,2),S=k[0],C=k[1],N=i.a.useState(""),U=Object(f.a)(N,2),T=U[0],L=U[1],I=le(Object(W.a)()),D=i.a.useContext(w);i.a.useEffect((function(){if(D.adminServices){var e,t,a;u(!0);var l={orderBy:"nameLower",limit:m,startAfter:0===E?void 0:(null===(e=x[E])||void 0===e?void 0:e.toLowerCase())||(null===n||void 0===n||null===(t=n[m-1])||void 0===t||null===(a=t.name)||void 0===a?void 0:a.toLowerCase()),nameLower:(null===T||void 0===T?void 0:T.length)>0?T.toLowerCase():void 0,useCache:!1};D.adminServices.fetchServices(l).then((function(e){e.length>0?(r(e),x[E+1]=e[e.length-1].name,O(x)):0!==E&&(C((E-1)*m+n.length),h(E-1))})).catch((function(e){return console.error(e)})).finally((function(){u(!1)}))}}),[D.adminServices,E,m,T]);var B=Object(re.a)((function(e){L(e),h(0)}),750);return i.a.createElement("div",{className:I.root},i.a.createElement("div",{className:I.header},i.a.createElement(ne,{onChange:B}),i.a.createElement("div",null,i.a.createElement(A.a,{onClick:function(){return e.push("/addBusiness")}},"Add Business"),i.a.createElement(A.a,{onClick:function(){return e.push("/sync")}},"Upload CSV"))),i.a.createElement(Q,{businesses:n,onSelectBusiness:function(t){return e.push("/addBusiness",{business:t})}}),i.a.createElement(q.a,{backIconButtonProps:{disabled:o||0===E},nextIconButtonProps:{disabled:o||S>0&&(E+1)*m>S},rowsPerPageOptions:[10,25,50],component:"div",count:S,rowsPerPage:m,page:E,onChangePage:function(e,t){console.log("Changing page from ".concat(E," to ").concat(t)),h(t)},onChangeRowsPerPage:function(e){p(parseInt(e.target.value,10)),h(0)}}),i.a.createElement(V.a,{style:{zIndex:0,color:"#fff"},open:o},i.a.createElement(R.a,{color:"inherit"})))},ce=a(246),oe=a(247),ue=a(248),se=a(249),de=a(250),me=a(185),pe=a(251),fe=function(e){var t=e.dialogOpen,a=e.setDialogOpen,n=e.addUser,r=i.a.useState(""),l=Object(f.a)(r,2),c=l[0],o=l[1];return i.a.createElement(ce.a,{open:t,onClose:function(){return a(!1)}},i.a.createElement(oe.a,null,"Add user"),i.a.createElement(ue.a,null,i.a.createElement(se.a,null,"Enter the user's G-Mail address to allow them access to the management page. User must have a valid Google account to use this page."),i.a.createElement(Z.a,{color:"secondary",value:c,onChange:function(e){var t;return o(null===(t=e.target)||void 0===t?void 0:t.value)},autoFocus:!0,margin:"dense",label:"Email Address",type:"email",fullWidth:!0})),i.a.createElement(de.a,null,i.a.createElement(A.a,{onClick:function(){return a(!1)},color:"secondary"},"Cancel"),i.a.createElement(A.a,{onClick:function(){n(c).then((function(){return a(!1)}))},color:"secondary"},"Add User")))},ve=function(e){var t=e.dialogOpen,a=e.setDialogOpen,n=e.deleteUser;return i.a.createElement(ce.a,{open:t,onClose:function(){return a(!1)}},i.a.createElement(oe.a,null,"Delete newsfeed entry?"),i.a.createElement(ue.a,null,i.a.createElement(se.a,null,"Are you sure you'd like to delete this entry?")),i.a.createElement(de.a,null,i.a.createElement(A.a,{onClick:function(){return a(!1)},color:"secondary"},"Cancel"),i.a.createElement(A.a,{onClick:function(){n().then((function(){return a(!1)})).catch((function(e){return console.error(e)}))},color:"secondary",autoFocus:!0},"Delete")))},be=Object(I.a)((function(e){return{root:{display:"flex",alignItems:"center",flexDirection:"column",margin:"15px"},header:{display:"flex",alignItems:"center",width:"100%",marginBottom:"10px"},addUserContainer:{marginLeft:"auto"},table:{maxHeight:"70vh"}}})),Ee=function(e){var t=Object(W.a)(),a=be(t),n=Object(P.a)(t.breakpoints.down("sm"));return i.a.createElement(H.a,{component:z.a,className:a.table},i.a.createElement(J.a,{stickyHeader:!0,"aria-label":"sticky table"},i.a.createElement(K.a,null,i.a.createElement(G.a,null,i.a.createElement(Y.a,null,"E-Mail Address"),!n&&i.a.createElement(Y.a,null,"Currently Active"),!n&&i.a.createElement(Y.a,null,"Last Modified"),i.a.createElement(Y.a,null))),i.a.createElement($.a,null,e.users.map((function(t){return i.a.createElement(G.a,{style:{cursor:"default"},key:t.email},i.a.createElement(Y.a,{component:"th",scope:"row"},t.email),!n&&i.a.createElement(Y.a,null,"".concat(t.valid)),!n&&i.a.createElement(Y.a,null,t.lastModified&&new Date(t.lastModified).toLocaleDateString()),i.a.createElement(Y.a,null,t.valid&&i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(me.a,{style:{marginLeft:"auto"},onClick:function(){e.onDelete(t)}},i.a.createElement(pe.a,{style:{color:"#d74b4b"}})))))})))))},he=function(){var e=i.a.useState([]),t=Object(f.a)(e,2),a=t[0],n=t[1],r=i.a.useState(!0),l=Object(f.a)(r,2),c=l[0],o=l[1],u=i.a.useState(!1),s=Object(f.a)(u,2),d=s[0],v=s[1],b=i.a.useState(!1),E=Object(f.a)(b,2),h=E[0],g=E[1],y=i.a.useState(0),x=Object(f.a)(y,2),O=x[0],j=x[1],k=i.a.useState(),S=Object(f.a)(k,2),C=S[0],N=S[1],U=Object(W.a)(),_=be(U),T=i.a.useContext(w);return i.a.useEffect((function(){var e;null===(e=T.adminServices)||void 0===e||e.fetchUsers().then((function(e){return n(e)})).catch((function(e){return console.error(e)})).finally((function(){return o(!1)}))}),[T.adminServices,O]),i.a.createElement("div",{className:_.root},i.a.createElement("div",{className:_.header},i.a.createElement("div",{className:_.addUserContainer},i.a.createElement(A.a,{onClick:function(){return v(!0)}},"Add User"))),i.a.createElement(Ee,{users:a,onDelete:function(e){N(e),g(!0)}}),i.a.createElement(fe,{dialogOpen:d,setDialogOpen:v,addUser:function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(a=T.adminServices)||void 0===a?void 0:a.putUsers([{email:t,valid:!0}]);case 2:j(O+1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),i.a.createElement(ve,{dialogOpen:h,setDialogOpen:g,deleteUser:Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=T.adminServices)||void 0===t?void 0:t.putUsers([{email:C.email,valid:!1}]);case 2:j(O+1);case 3:case"end":return e.stop()}}),e)})))}),i.a.createElement(V.a,{style:{zIndex:0,color:"#fff"},open:c},i.a.createElement(R.a,{color:"inherit"})))},ge=a(252),ye=a(253),xe=a(254),Oe=a(255),je=a(43),ke=a(123),Se=a.n(ke),Ce=Object(I.a)({root:{width:"100%",display:"flex",flexDirection:"column"},addButtonContainer:{marginLeft:"auto",padding:"30px"},cardContainer:{margin:"30px",transition:"0.2s","&:hover":{backgroundColor:D.lightGray}}}),we=function(){var e=Ce(),t=Object(_.g)(),a=i.a.useContext(w),n=i.a.useState(!0),r=Object(f.a)(n,2),l=r[0],c=r[1],o=i.a.useState([]),u=Object(f.a)(o,2),s=u[0],d=u[1],m=i.a.useState(!1),p=Object(f.a)(m,2),v=p[0],b=p[1],E=i.a.useState(),h=Object(f.a)(E,2),g=h[0],y=h[1],x=function(){var e;null===(e=a.adminServices)||void 0===e||e.fetchFeed({limit:10,orderBy:"date",direction:"desc"}).then((function(e){d(e)})).catch((function(e){return console.error(e)})).finally((function(){return c(!1)}))};return i.a.useEffect(x,[a.adminServices]),i.a.createElement("div",{className:e.root},i.a.createElement("div",{className:e.addButtonContainer},i.a.createElement(A.a,{variant:"outlined",color:"secondary",onClick:function(){return t.push("/addNewsfeed")}},"Add")),s.map((function(a){return i.a.createElement(ge.a,{key:a.id,className:e.cardContainer,raised:!0,onClick:function(){return t.push("/addNewsFeed",{entry:a})}},i.a.createElement(ye.a,{title:i.a.createElement("div",{style:{display:"flex"}},a.title,i.a.createElement(me.a,{style:{marginLeft:"auto"},onClick:function(e){e.stopPropagation(),y(a),b(!0)}},i.a.createElement(Se.a,{style:{color:D.lightRed}}))),subheader:new Date(a.date).toLocaleDateString()}),a.imageUrl&&i.a.createElement(xe.a,{image:a.imageUrl}),a.subtitle&&i.a.createElement(Oe.a,null,i.a.createElement(je.a,null,a.subtitle)))})),i.a.createElement(ce.a,{open:v,onClose:function(){return b(!1)}},i.a.createElement(oe.a,null,"Delete newsfeed entry?"),i.a.createElement(ue.a,null,i.a.createElement(se.a,null,"Are you sure you'd like to delete this entry?")),i.a.createElement(de.a,null,i.a.createElement(A.a,{onClick:function(){return b(!1)},color:"secondary"},"Cancel"),i.a.createElement(A.a,{onClick:function(){var e;null===(e=a.adminServices)||void 0===e||e.deleteFeedEntry(g.id).then((function(){return b(!1)})).then(x).catch((function(e){return console.error(e)}))},color:"secondary",autoFocus:!0},"Delete"))),i.a.createElement(V.a,{style:{zIndex:0,color:"#fff"},open:l},i.a.createElement(R.a,{color:"inherit"})))},Ne=a(288),Ue=a(259),_e=a(278),Te=a(256),Le=a(277),Ie=Object(I.a)({input:{width:"100%"}}),Re=function(e){var t=e.label,a=e.disabled,n=e.onUpdate,r=e.validator,l=Object(g.a)(e,["label","disabled","onUpdate","validator"]),c=Ie(),o=i.a.useState(!1),u=Object(f.a)(o,2),s=u[0],d=u[1],m=i.a.useState(),p=Object(f.a)(m,2),v=p[0],b=p[1],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.value;if(r){var t=r(e),a=t.valid,n=t.failureText;d(!a),b(n)}};return i.a.useEffect((function(){null===r||void 0===r||r(l.value)}),[]),i.a.createElement(Z.a,Object.assign({helperText:v,error:s,required:l.required,disabled:a,autoComplete:"off",type:"search",onChange:function(e){E(e.target.value),null===n||void 0===n||n(e.target.value)},onBlur:function(){return E()},color:"secondary",label:t,className:c.input},l,{value:l.value||""}))},Ae=Object(Te.a)(),De=function(e){var t=i.a.useState(!1),a=Object(f.a)(t,2),n=a[0],r=a[1],l=i.a.useState(e.helperText),c=Object(f.a)(l,2),o=c[0],u=c[1],s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.values||[];if(e.validator){var a=e.validator(t),n=a.valid,l=a.failureText;r(!n),u(l)}};return i.a.createElement("div",null,i.a.createElement(Le.a,{multiple:!0,disabled:e.disabled,value:e.values||[],freeSolo:!0,loading:e.loading,onChange:function(t,a){s(a),e.onUpdate(a)},options:e.options||[],getOptionLabel:function(e){return e},renderInput:function(t){return i.a.createElement(Re,Object.assign({},t,{style:{width:"100%",minWidth:"200px"},color:"secondary",label:e.inputLabel,placeholder:e.inputLabel,className:e.inputClass,helperText:o,error:n,onBlur:function(){return s()},InputProps:Object(h.a)(Object(h.a)({},t.InputProps),{},{endAdornment:i.a.createElement(i.a.Fragment,null,e.loading?i.a.createElement(R.a,{color:"inherit",size:20}):null,t.InputProps.endAdornment)})}))},filterOptions:function(e,t){var a=Ae(e,t);return""!==t.inputValue&&a.push(t.inputValue),a}}))},Be=a(125);!function(e){e.Required="required",e.Email="email"}(r||(r={}));var Me,Fe=Object(F.a)({},r.Email,/.+@.+\..+/),We=function(e){return function(t){var a,n,l={valid:!0},i=Object(Be.a)(e.validations||[]);try{var c=function(){var a=n.value;if(!l.valid)return"break";switch(a){case r.Required:("undefined"===typeof t||"string"===typeof t&&0===t.length||Array.isArray(t)&&0===t.length)&&(l.valid=!1,l.failureType=r.Required,l.failureText=e.label?"".concat(e.label," is required"):"Field is required");break;case r.Email:if(Array.isArray(t))l.valid=t.every((function(e){var t;return null===(t=Fe[a])||void 0===t?void 0:t.test(e)}));else if("string"===typeof t){var i;l.valid=null===(i=Fe[a])||void 0===i?void 0:i.test(t)}l.failureType=l.valid?void 0:a,l.failureText=l.valid?void 0:"Invalid input"}};for(i.s();!(n=i.n()).done;){if("break"===c())break}}catch(o){i.e(o)}finally{i.f()}return null===(a=e.handleValidation)||void 0===a||a.call(e,l),l}},qe=Object(I.a)((function(e){return{root:{margin:"0px",width:"100%"},inputContainer:Object(F.a)({width:"100%"},e.breakpoints.down("sm"),{paddingLeft:"5px !important",paddingRight:"5px !important"})}})),Ve=function(e){var t=i.a.useContext(w),a=i.a.useState(e.business),n=Object(f.a)(a,2),l=n[0],c=n[1],o=i.a.useState(!0),u=Object(f.a)(o,2),s=u[0],d=u[1],m=i.a.useState(!0),p=Object(f.a)(m,2),v=p[0],b=p[1],E=i.a.useState(),g=Object(f.a)(E,2),y=g[0],x=g[1],O=i.a.useState(),j=Object(f.a)(O,2),k=j[0],S=j[1],C=i.a.useState({}),N=Object(f.a)(C,2),U=N[0],_=N[1];i.a.useEffect((function(){var e;null===(e=t.adminServices)||void 0===e||e.fetchCategories().then((function(e){S(e||[]),b(!1)})).then((function(){var e;return null===(e=t.adminServices)||void 0===e?void 0:e.fetchLocations()})).then((function(e){x(e||[]),d(!1)})).catch((function(e){return console.error(e)}))}),[t.adminServices]),i.a.useEffect((function(){var t;null===(t=e.onUpdate)||void 0===t||t.call(e,l)}),[l]),i.a.useEffect((function(){var t;null===(t=e.onValidation)||void 0===t||t.call(e,Object.values(U).reduce((function(e,t){return e&&t}),!0))}),[U]);var T=qe(Object(W.a)());return i.a.createElement("div",{style:{margin:"15px"}},i.a.createElement(X.a,{container:!0,spacing:10,className:T.root,alignItems:"flex-end"},i.a.createElement(X.a,{item:!0,xs:12,md:12,className:T.inputContainer},i.a.createElement(Re,{label:"Business Name",disabled:!e.editing,onUpdate:function(e){return c(Object(h.a)(Object(h.a)({},l),{},{name:e}))},value:l.name,validator:We({handleValidation:function(e){var t=e.valid;return _(Object(h.a)(Object(h.a)({},U),{},{name:t}))},validations:[r.Required]}),required:!0})),i.a.createElement(X.a,{item:!0,xs:12,md:6,className:T.inputContainer},i.a.createElement(De,{loading:s,disabled:!e.editing,inputLabel:"Location(s)",values:l.location,options:y,onUpdate:function(e){return c(Object(h.a)(Object(h.a)({},l),{},{location:e}))},validator:We({handleValidation:function(e){var t=e.valid;return _(Object(h.a)(Object(h.a)({},U),{},{location:t}))},validations:[r.Required]})})),i.a.createElement(X.a,{item:!0,xs:12,md:6,className:T.inputContainer},i.a.createElement(De,{loading:v,disabled:!e.editing,inputLabel:"Categories",values:l.categories,options:k,onUpdate:function(e){return c(Object(h.a)(Object(h.a)({},l),{},{categories:e}))},validator:We({handleValidation:function(e){var t=e.valid;return _(Object(h.a)(Object(h.a)({},U),{},{categories:t}))},validations:[r.Required]})})),i.a.createElement(X.a,{item:!0,xs:12,md:6,className:T.inputContainer},i.a.createElement(Re,{label:"Address",disabled:!e.editing,onUpdate:function(e){return c(Object(h.a)(Object(h.a)({},l),{},{address:e}))},value:l.address})),i.a.createElement(X.a,{item:!0,xs:12,md:6,className:T.inputContainer},i.a.createElement(De,{loading:!1,disabled:!e.editing,inputLabel:"Email Addresses",values:l.email,options:[],onUpdate:function(e){return c(Object(h.a)(Object(h.a)({},l),{},{email:e}))},validator:We({handleValidation:function(e){var t=e.valid;return _(Object(h.a)(Object(h.a)({},U),{},{categories:t}))},validations:[r.Email]})})),i.a.createElement(X.a,{item:!0,xs:12,md:8,className:T.inputContainer},i.a.createElement(Re,{label:"Description",disabled:!e.editing,onUpdate:function(e){return c(Object(h.a)(Object(h.a)({},l),{},{description:e}))},value:l.description,rows:4,validator:We({handleValidation:function(e){var t=e.valid;return _(Object(h.a)(Object(h.a)({},U),{},{description:t}))},validations:[r.Required]}),multiline:!0,required:!0})),i.a.createElement(X.a,{item:!0,xs:12,md:4,className:T.inputContainer},i.a.createElement(Re,{label:"Phone Number",disabled:!e.editing,onUpdate:function(e){return c(Object(h.a)(Object(h.a)({},l),{},{phoneNumber:e}))},value:l.phoneNumber}))))},Pe=a(241),He=a(285),ze=a(276),Je=a(244),Ke=a(257),Ge=a(258),Ye=Object(I.a)({root:{margin:"15px"},inputWrapper:{maxWidth:"500px"}}),$e={facebook:"facebook",twitter:"twitter",instagram:"instagram",pinterest:"pinterest",patreon:"patreon",soundcloud:"soundcloud",youtube:"youtube",bandcamp:"bandcamp",fanlink:"fanlink",linktree:"linktree",spotify:"spotify",appleMusic:"appleMusic",songLink:"songLink",meetup:"meetup"},Qe=function(e){return i.a.createElement(G.a,null,i.a.createElement(Y.a,null,i.a.createElement(Pe.a,{style:{width:"100%"}},i.a.createElement(He.a,{color:"secondary",id:"select-platform-label"},"Select a Platform"),i.a.createElement(ze.a,{color:"secondary",labelId:"select-platform-label",value:"",onChange:function(t){return e.onSelect(t.target.value)}},Object.keys($e).filter((function(t){var a;return"undefined"===typeof(null===(a=e.bussiness.socialMedia)||void 0===a?void 0:a[t])})).map((function(e){return i.a.createElement(Je.a,{value:e,key:e},e)}))))),i.a.createElement(Y.a,null),i.a.createElement(Y.a,null,i.a.createElement("div",{style:{display:"flex",width:"100%"},hidden:!e.editing},i.a.createElement(me.a,{style:{marginLeft:"auto",marginRight:"30px"},onClick:e.onCancel},i.a.createElement(Ke.a,{style:{color:"rgb(148 48 48)"}})))))},Xe=function(e){var t=Ye(),a=i.a.useState(!1),n=Object(f.a)(a,2),l=n[0],c=n[1],o=i.a.useState({}),u=Object(f.a)(o,2),s=u[0],d=u[1];return i.a.useEffect((function(){var t;null===(t=e.onValidation)||void 0===t||t.call(e,Object.values(s).reduce((function(e,t){return e&&t}),!0))}),[s]),i.a.createElement("div",{className:t.root},i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("div",{style:{marginLeft:"auto",marginRight:"35px",marginBottom:"5px"}},i.a.createElement(A.a,{onClick:function(){return c(!0)}},"Add"))),i.a.createElement(H.a,{component:z.a,style:{maxHeight:"75vh"}},i.a.createElement(J.a,{stickyHeader:!0,"aria-label":"sticky table"},i.a.createElement(K.a,null,i.a.createElement(G.a,null,i.a.createElement(Y.a,null,"Social Media Type"),i.a.createElement(Y.a,null,"URL"),i.a.createElement(Y.a,null))),i.a.createElement($.a,null,Object.keys(e.business.socialMedia||{}).map((function(a){var n;return i.a.createElement(G.a,{style:{cursor:"default"},key:a},i.a.createElement(Y.a,{component:"th",scope:"row"},a),i.a.createElement(Y.a,null,i.a.createElement("div",{className:t.inputWrapper},i.a.createElement(Re,{required:!0,disabled:!e.editing,label:"".concat(a," url"),value:null===(n=e.business.socialMedia)||void 0===n?void 0:n[a],onUpdate:function(t){var n;return null===(n=e.onUpdate)||void 0===n?void 0:n.call(e,Object(h.a)(Object(h.a)({},e.business),{},{socialMedia:Object(h.a)(Object(h.a)({},e.business.socialMedia),{},Object(F.a)({},a,t))}))},validator:We({handleValidation:function(e){var t=e.valid;return d(Object(h.a)(Object(h.a)({},s),{},Object(F.a)({},a,t)))},validations:[r.Required]})}))),i.a.createElement(Y.a,null,e.editing&&i.a.createElement("div",{style:{display:"flex",width:"100%"},hidden:!e.editing},i.a.createElement(me.a,{style:{marginLeft:"auto",marginRight:"30px"},onClick:function(){var t,n,r=Object(h.a)({},e.business);null===(t=e.business.socialMedia)||void 0===t||delete t[a];var l=Object(h.a)({},s);delete l[a],d(l),null===(n=e.onUpdate)||void 0===n||n.call(e,r)}},i.a.createElement(Ge.a,{style:{color:"rgb(148 48 48)"}})))))})),l&&i.a.createElement(Qe,{bussiness:e.business,onCancel:function(){return c(!1)},onSelect:function(t){var a;null===(a=e.onUpdate)||void 0===a||a.call(e,Object(h.a)(Object(h.a)({},e.business),{},{socialMedia:Object(h.a)(Object(h.a)({},e.business.socialMedia),{},Object(F.a)({},t,""))})),c(!1)}})))))},Ze=Object(I.a)({root:{width:"100%",display:"grid",alignItems:"center",gridRowGap:"30px"},inputWrapper:{margin:"15px",maxWidth:"500px"},image:{maxWidth:"80vw",marginTop:"20px"}}),et=function(e){var t=Ze();return i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.inputWrapper},i.a.createElement(Re,{onUpdate:function(t){var a;return null===(a=e.onUpdate)||void 0===a?void 0:a.call(e,Object(h.a)(Object(h.a)({},e.business),{},{logoUrl:t}))},value:e.business.logoUrl,label:"Logo URL"}),e.business.logoUrl&&i.a.createElement("img",{src:e.business.logoUrl,className:t.image,alt:"Logo"})),i.a.createElement("div",{className:t.inputWrapper},i.a.createElement(Re,{onUpdate:function(t){var a;return null===(a=e.onUpdate)||void 0===a?void 0:a.call(e,Object(h.a)(Object(h.a)({},e.business),{},{bannerUrl:t}))},value:e.business.bannerUrl,label:"Banner URL"}),e.business.bannerUrl&&i.a.createElement("img",{src:e.business.bannerUrl,className:t.image,alt:"Banner"})))},tt=function(e){return Array.isArray(e)&&0===e.length||"object"===typeof e&&0===Object.keys(e).length},at=function e(t,a){var n=function(e){return 0===e.trim().length||(null===a||void 0===a?void 0:a(e))};if(Array.isArray(t)){var r=[];t.forEach((function(l,i){"string"===typeof l?n(l)?r.push(i):t[i]=t[i].trim():(e(l,a),tt(l)&&r.push(i))})),r.forEach((function(e){return delete t[e]}))}else if("object"===typeof t)for(var l=0,i=Object.keys(t);l<i.length;l++){var c=i[l];"string"===typeof t[c]?n(t[c])?delete t[c]:t[c]=t[c].trim():(e(t[c],a),tt(t[c])&&delete t[c])}},nt="string",rt="array",lt="number",it=Object(I.a)({root:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},footer:{width:"100%",display:"flex",marginTop:"auto"},buttonContainer:{marginLeft:"auto",padding:"30px"},contentContainer:{},backButton:{},instructions:{}}),ct=function(e){var t,a,n=it(),r=Object(_.g)(),l=i.a.useContext(w),c=i.a.useState(0),o=Object(f.a)(c,2),u=o[0],s=o[1],d=i.a.useState((null===(t=e.location)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.business)||{}),m=Object(f.a)(d,2),p=m[0],v=m[1],b=i.a.useState(!1),E=Object(f.a)(b,2),h=E[0],g=E[1],y=i.a.useState(!1),x=Object(f.a)(y,2),O=x[0],j=x[1],k=i.a.useState(!1),S=Object(f.a)(k,2),C=S[0],N=S[1],U=["Basic Information","Social Media and Contact","Images"];return i.a.createElement("div",{className:n.root},i.a.createElement(Ne.a,{activeStep:u,alternativeLabel:!0},U.map((function(e){return i.a.createElement(Ue.a,{key:e},i.a.createElement(_e.a,null,e))}))),i.a.createElement("div",{className:n.contentContainer},function(e){switch(e){case 0:return i.a.createElement(Ve,{business:p,onUpdate:v,editing:!0,onValidation:j});case 1:return i.a.createElement(Xe,{business:p,onUpdate:v,editing:!0,onValidation:j});case 2:return i.a.createElement(et,{business:p,onUpdate:v,editing:!0,onValidation:j});default:return"How did this happen"}}(u)),i.a.createElement("div",{className:n.footer},p.id&&i.a.createElement("div",{style:{padding:"30px"}},i.a.createElement(A.a,{variant:"contained",color:"primary",onClick:function(){return N(!0)}},"Delete Entry")),i.a.createElement("div",{className:n.buttonContainer},i.a.createElement(A.a,{style:{marginRight:"10px"},onClick:function(){0===u?r.goBack():s((function(e){return e-1}))},className:n.backButton},0===u?"Cancel":"Back"),i.a.createElement(A.a,{variant:"contained",color:"primary",onClick:function(){var e;u+1===U.length?(at(p),g(!0),null===(e=l.adminServices)||void 0===e||e.uploadBusinesses([p]).then((function(){g(!1),r.push("/businesses")})).catch((function(e){return console.error(e)}))):s((function(e){return e+1}))},disabled:!O},u===U.length-1?"Add Business":"Next"))),i.a.createElement(V.a,{style:{zIndex:0,color:"#fff"},open:h},i.a.createElement(R.a,{color:"inherit"})),i.a.createElement(ce.a,{open:C,onClose:function(){return N(!1)}},i.a.createElement(oe.a,null,"Delete business entry?"),i.a.createElement(ue.a,null,i.a.createElement(se.a,null,"Are you sure you'd like to delete this entry?")),i.a.createElement(de.a,null,i.a.createElement(A.a,{onClick:function(){return N(!1)},color:"secondary"},"Cancel"),i.a.createElement(A.a,{onClick:function(){var e;p.id&&(N(!1),g(!0),null===(e=l.adminServices)||void 0===e||e.deleteBusiness(p.id).then(r.goBack).catch((function(e){return console.error(e)})))},color:"secondary",autoFocus:!0},"Delete"))))},ot=a(275),ut=Object(I.a)({root:{marginTop:"15px",width:"100%",height:"100%",display:"flex",flexDirection:"column"},select:{marginTop:"10px",minWidth:"200px"},grid:{width:"100%"},inputWrapper:{marginLeft:"15px",width:"100%"}}),st=function(e){var t,a=i.a.useContext(w),n=Object(_.g)(),l=ut(),c=i.a.useState({date:Date.now()}),o=Object(f.a)(c,2),u=o[0],s=o[1],d=i.a.useState([]),m=Object(f.a)(d,2),p=m[0],v=m[1],b=i.a.useState(!0),E=Object(f.a)(b,2),g=E[0],y=E[1],x=i.a.useState({type:{valid:!1},title:{valid:!1}}),O=Object(f.a)(x,2),j=O[0],k=O[1];i.a.useEffect((function(){var e=Object(h.a)(Object(h.a)({},j),{},{type:{valid:!!u.articleType},title:{valid:!!u.title}});if(u)switch(u.articleType){case"NEW_PODCAST":e.trackId={valid:!!u.trackId};break;case"FEATURED_BUSINESS":e.selectedBusiness={valid:!!u.serviceName};break;case"NATIVE_HTML":case"RAW_HTML":e.htmlContent={valid:!!u.htmlContent}}console.log(e),k(e)}),[u]),i.a.useEffect((function(){var t,n,r,l,i=null===(t=e.location)||void 0===t||null===(n=t.state)||void 0===n||null===(r=n.entry)||void 0===r?void 0:r.id;null===(l=a.adminServices)||void 0===l||l.fetchServices({useCache:!0}).then((function(e){return v(e.map((function(e){return e.name})))})).then((function(){var e;return i?null===(e=a.adminServices)||void 0===e?void 0:e.fetchArticle(i):Promise.resolve(u)})).then((function(e){return s(e)})).catch((function(e){return console.error(e)})).finally((function(){return y(!1)}))}),[a.adminServices,e.location]);return i.a.createElement("div",{className:l.root},i.a.createElement(X.a,{container:!0,spacing:10,alignItems:"flex-end",className:l.grid},i.a.createElement(X.a,{item:!0,xs:12,lg:6,className:l.inputWrapper},i.a.createElement(Pe.a,null,i.a.createElement(He.a,{id:"type-select-label",color:"secondary"},"Type"),i.a.createElement(ze.a,{label:"Article Type",className:l.select,labelId:"type-select-label",value:u.articleType||"",onChange:function(e){var t=e.target.value,a={type:{valid:!0},title:j.title};switch(t){case"NEW_PODCAST":a.trackId={valid:!1};break;case"FEATURED_BUSINESS":a.selectedBusiness={valid:!1};break;case"NATIVE_HTML":case"RAW_HTML":a.htmlContent={valid:!1}}k(a),s(Object(h.a)(Object(h.a)({},u),{},{articleType:e.target.value}))}},i.a.createElement(Je.a,{value:"NEW_PODCAST"},"New Podcast"),i.a.createElement(Je.a,{value:"FEATURED_BUSINESS"},"Featured Business"),i.a.createElement(Je.a,{value:"NATIVE_HTML"},"Native HTML"),i.a.createElement(Je.a,{value:"RAW_HTML"},"Raw HTML")))),i.a.createElement(X.a,{item:!0,xs:12,lg:6,className:l.inputWrapper},i.a.createElement(ot.a,{required:!0,value:u.date,onChange:function(e){return s(Object(h.a)(Object(h.a)({},u),{},{date:e.getTime()}))},label:"Article Date",showTodayButton:!0})),i.a.createElement(X.a,{item:!0,xs:12,lg:6,className:l.inputWrapper},i.a.createElement(Re,{label:"Title",value:u.title,onUpdate:function(e){return s(Object(h.a)(Object(h.a)({},u),{},{title:e}))},validator:We({handleValidation:function(e){return k(Object(h.a)(Object(h.a)({},j),{},{title:e}))},validations:[r.Required]}),required:!0})),i.a.createElement(X.a,{item:!0,xs:12,lg:6,className:l.inputWrapper},i.a.createElement(Re,{label:"Subtitle",value:u.subtitle,onUpdate:function(e){return s(Object(h.a)(Object(h.a)({},u),{},{subtitle:e}))}})),i.a.createElement(X.a,{item:!0,xs:12,lg:6,className:l.inputWrapper},i.a.createElement(Re,{label:"Share URL",value:u.shareUrl,onUpdate:function(e){return s(Object(h.a)(Object(h.a)({},u),{},{shareUrl:e}))}})),i.a.createElement(X.a,{item:!0,xs:12,lg:6,className:l.inputWrapper},i.a.createElement(Re,{label:"Image URL",value:u.imageUrl,onUpdate:function(e){return s(Object(h.a)(Object(h.a)({},u),{},{imageUrl:e}))}})),i.a.createElement(X.a,{item:!0,xs:12,lg:6,className:l.inputWrapper},u.imageUrl&&i.a.createElement("img",{src:u.imageUrl,style:{maxWidth:"300px",maxHeight:"300px"}})),"FEATURED_BUSINESS"===u.articleType&&i.a.createElement(X.a,{item:!0,xs:12,lg:6,className:l.inputWrapper},i.a.createElement(Le.a,{value:(null===(t=u)||void 0===t?void 0:t.serviceName)||null,onChange:function(e,t){k(Object(h.a)(Object(h.a)({},j),{},{selectedBusiness:{valid:null!==t&&(null===t||void 0===t?void 0:t.length)>0}})),s(Object(h.a)(Object(h.a)({},u),{},{serviceName:t}))},options:p,getOptionLabel:function(e){return e},renderInput:function(e){var t;return i.a.createElement(Z.a,Object.assign({},e,{label:"Business",variant:"outlined",helperText:!(null===(t=j.selectedBusiness)||void 0===t?void 0:t.valid)&&"Required field"}))}})),("RAW_HTML"===u.articleType||"NATIVE_HTML"===u.articleType||"FEATURED_BUSINESS"===u.articleType)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(X.a,{item:!0,xs:12,lg:12,className:l.inputWrapper},i.a.createElement(Re,{multiline:!0,rows:5,label:"HTML Content",value:u.htmlContent,onUpdate:function(e){return s(Object(h.a)(Object(h.a)({},u),{},{htmlContent:e}))},validator:"FEATURED_BUSINESS"===u.articleType?void 0:We({handleValidation:function(e){return k(Object(h.a)(Object(h.a)({},j),{},{htmlContent:e}))},validations:[r.Required]}),required:"FEATURED_BUSINESS"!==u.articleType})),i.a.createElement(X.a,{item:!0,xs:12,lg:12,className:l.inputWrapper},u.htmlContent&&i.a.createElement(ge.a,{dangerouslySetInnerHTML:{__html:u.htmlContent}}))),"NEW_PODCAST"===u.articleType&&i.a.createElement(X.a,{item:!0,xs:12,lg:6,className:l.inputWrapper},i.a.createElement(Re,{label:"Podcast Track ID",value:u.trackId,onUpdate:function(e){return s(Object(h.a)(Object(h.a)({},u),{},{trackId:e}))},validator:We({handleValidation:function(e){return k(Object(h.a)(Object(h.a)({},j),{},{trackId:e}))},validations:[r.Required]}),required:!0}))),i.a.createElement("div",{style:{display:"flex",marginLeft:"auto",marginTop:"auto",padding:"30px"}},i.a.createElement(A.a,{onClick:function(){return n.goBack()},variant:"outlined",color:"secondary"},"Cancel"),i.a.createElement(A.a,{onClick:function(){var e;y(!0);var t=Object(h.a)({},u);at(t),null===(e=a.adminServices)||void 0===e||e.uploadNewsfeedEntries([t]).then((function(){return n.push("/newsfeed")})).catch((function(e){return console.error(e)})).finally((function(){return y(!1)}))},variant:"outlined",color:"secondary",style:{marginLeft:"20px"},disabled:Object.values(j).some((function(e){return!e.valid}))},"Upload")),i.a.createElement(V.a,{style:{zIndex:0,color:"#fff"},open:g},i.a.createElement(R.a,{color:"inherit"})))},dt=a(243),mt=a(186),pt=a(268),ft=a(271),vt=a(126),bt=a.n(vt),Et=a(127),ht=a.n(Et),gt=a(261),yt=a(260),xt=a(281),Ot=a(264),jt=a(266),kt=a(267),St=a(265),Ct=a(70),wt=a(262),Nt=a(263),Ut=a(133),_t=function(e){var t=Object(Ut.a)({onDrop:e.handleDrop}),a=t.getRootProps,n=t.getInputProps,r=t.isDragActive;return i.a.createElement("div",a(),i.a.createElement("input",n()),i.a.createElement(z.a,{style:{height:"500px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:r?.5:1}},e.selectedFile?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("h3",null,"Uploading ",e.selectedFile.name)),i.a.createElement("div",null,i.a.createElement("h4",null,"Press next to continue"))):i.a.createElement(i.a.Fragment,null,r?"Drop files here to upload":"Drag files here or click to select")))},Tt=function(e){var t=i.a.useState("0"),a=Object(f.a)(t,2),n=a[0],r=a[1];return i.a.createElement("div",{style:{margin:"30px"}},i.a.createElement(Ct.a,{value:n.toString()},i.a.createElement(gt.a,{position:"static"},i.a.createElement(wt.a,{onChange:function(e,t){return r(t)},centered:!0},i.a.createElement(yt.a,{label:"Upload from Computer",value:"0"}))),i.a.createElement(Nt.a,{value:"0"},i.a.createElement(xt.a,{style:{marginBottom:"10px",backgroundColor:D.cardBackground}},i.a.createElement(Ot.a,{expandIcon:i.a.createElement(St.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},i.a.createElement(je.a,{style:{fontSize:"20px"}},"Export Instructions")),i.a.createElement(jt.a,{style:{backgroundColor:D.gray}}),i.a.createElement(kt.a,null,i.a.createElement("div",null,i.a.createElement(dt.a,null,i.a.createElement(mt.a,null,i.a.createElement(pt.a,null,"- Navigate to the ",i.a.createElement("a",{style:{color:D.lightAccent},href:"https://www.blackownedmaine.com/wp-admin"},"WordPress admin site"))),i.a.createElement(mt.a,null,i.a.createElement(pt.a,null,"- Click on the ",i.a.createElement("b",null,"Black Owned Maine")," directory link in the side bar")),i.a.createElement(mt.a,null,i.a.createElement(pt.a,null,"- Click the ",i.a.createElement("b",null,"Export")," button at the top of the page")),i.a.createElement(mt.a,null,i.a.createElement(pt.a,null,"- Leave all fields selected and click ",i.a.createElement("b",null,"Next"),".")),i.a.createElement(mt.a,null,i.a.createElement(pt.a,null,"- ",i.a.createElement("b",{style:{color:D.lightRed}},"!!Important!!")," Change all the dropdown options that are set to ",i.a.createElement("b",null,"Slug")," to ",i.a.createElement("b",null,"Title"))),i.a.createElement(mt.a,null,i.a.createElement(pt.a,null,"- Click ",i.a.createElement("b",null,"Next."))),i.a.createElement(mt.a,null,i.a.createElement(pt.a,null,"- Select ",i.a.createElement("b",null,"Export Now")," to begin the export process.")),i.a.createElement(mt.a,null,i.a.createElement(pt.a,null,"- Once the export is complete and downloaded, extract the downloaded zip file and drag and drop the ",i.a.createElement("b",null,".csv")," file below.")))))),i.a.createElement(_t,{selectedFile:e.selectedFile,handleDrop:function(t){var a;1===t.length&&(a=t[0],e.setSelectedFile(a))}}))))},Lt=function(e){var t,a=i.a.useContext(w),n=i.a.useState(!0),r=Object(f.a)(n,2),l=r[0],c=r[1],o=i.a.useState([]),u=Object(f.a)(o,2),s=u[0],d=u[1];i.a.useEffect((function(){var e;null===(e=a.adminServices)||void 0===e||e.fetchCategories().then((function(e){d(e||[]),c(!1)}))}),[]);var m=null===(t=e.err.context.value)||void 0===t?void 0:t.split(/,\s*/);return i.a.createElement(De,{loading:l,inputLabel:e.err.path.join("."),values:m,options:s,helperText:e.err.message,onUpdate:function(t){e.onUpdate(t.length>0?t.join(", "):void 0)}})},It=function(e){var t=e.err,a=e.onUpdate;return t.path.join(".").includes("categories")?i.a.createElement(Lt,{err:t,onUpdate:a}):i.a.createElement(Re,{value:t.context.value,label:t.path.join("."),helperText:t.message,onUpdate:a})},Rt=Object(I.a)((function(){return{detailsHeader:{fontSize:"20px"},detailLabel:{marginTop:"8px",fontSize:"12px",color:D.lightAccent},details:{display:"flex",flexDirection:"column"}}})),At=function(e){var t,a,n,r,l,c=i.a.useState(),o=Object(f.a)(c,2),u=o[0],s=o[1],d=Rt(Object(W.a)());return i.a.createElement(ge.a,{elevation:3,style:{padding:"30px",margin:"30px"}},i.a.createElement(xt.a,null,i.a.createElement(Ot.a,{expandIcon:i.a.createElement(St.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},i.a.createElement(je.a,{className:d.detailsHeader},e.name)),i.a.createElement(kt.a,null,i.a.createElement("div",{className:d.details},(null===(t=e.details)||void 0===t?void 0:t.description)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{className:d.detailLabel},"Description"),i.a.createElement(je.a,null,null===(a=e.details)||void 0===a?void 0:a.description)),(null===(n=e.details)||void 0===n?void 0:n.address)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{className:d.detailLabel},"Address"),i.a.createElement(je.a,null,null===(r=e.details)||void 0===r?void 0:r.address))))),i.a.createElement(Oe.a,null,i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},null===(l=e.errors)||void 0===l?void 0:l.map((function(t,a){return i.a.createElement("div",{style:{marginTop:"15px",marginBottom:"15px"},key:"".concat(a)},i.a.createElement(It,{err:t,onUpdate:function(t){s(!!t&&t.trim().length>0),e.onUpdate(t,a)}}))}))),i.a.createElement("div",{style:{display:"flex",width:"100%"}},i.a.createElement(A.a,{style:{marginLeft:"auto"},variant:"outlined",onClick:e.onReset},"Reset"),i.a.createElement(A.a,{style:{marginLeft:"15px"},disabled:!u,variant:"outlined",onClick:e.onSave},"Save"))))},Dt=function(e){return i.a.createElement(ge.a,{elevation:3,style:{padding:"30px",margin:"30px"}},i.a.createElement(ye.a,{title:"Confirm Upload"}),i.a.createElement(jt.a,null),i.a.createElement(Oe.a,{style:{display:"flex",flexDirection:"column"}},i.a.createElement(je.a,null,"Confirm upload of ",e.count," businesses?"),e.unresolvedCount&&e.unresolvedCount>0?i.a.createElement(je.a,{style:{marginTop:"15px"}},"Note that there are ",e.unresolvedCount," businesses with unresolved errors. If you continue, these businesses will not be included in the upload, and will not be visible within the app."):i.a.createElement(i.a.Fragment,null)))},Bt=a(279),Mt=a(269),Ft=function(e){return i.a.createElement("div",{style:Object(h.a)({WebkitLineClamp:e.lineCount,overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",display:"-webkit-box"},e.containerStyle)},e.children)},Wt=function(e){var t=e.onRemove,a=e.fieldName,n=e.accept,r=e.lastDroppedItem,l=e.onDrop,c=Object(Bt.a)({accept:n,drop:l,canDrop:function(){return!r},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),o=Object(f.a)(c,2),u=o[0],s=u.isOver,d=u.canDrop,m=o[1];return i.a.createElement(ge.a,{ref:m,style:{backgroundColor:s&&d?"#4c4c4c":"#222"}},i.a.createElement(Oe.a,null,i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement(ge.a,{style:{flex:1}},i.a.createElement(Oe.a,null,i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",null,i.a.createElement(je.a,null,null===r||void 0===r?void 0:r.sourceKey),i.a.createElement(Ft,{lineCount:2,containerStyle:{color:"#989898",fontSize:13}},null===r||void 0===r?void 0:r.exampleSourceValue)),i.a.createElement("div",{style:{alignSelf:"center",marginLeft:"auto"}},i.a.createElement(me.a,{style:{opacity:r?1:0},disabled:!r,onClick:function(){return r&&t({sourceKey:null===r||void 0===r?void 0:r.sourceKey,targetKey:a})}},i.a.createElement(Mt.a,{style:{color:D.lightRed}})))))),i.a.createElement("span",{style:{marginLeft:"20px",marginRight:"20px"}},"\u2192"),i.a.createElement(ge.a,{style:{flex:1}},i.a.createElement(Oe.a,null,i.a.createElement(je.a,null,a))))))},qt=a(280),Vt=function(e){var t=e.dropSource,a=(e.isDropped,Object(qt.a)({item:t,collect:function(e){return{opacity:e.isDragging()?.4:1}}})),n=Object(f.a)(a,2),r=n[0].opacity,l=n[1],c=i.a.useState(!1),o=Object(f.a)(c,2),u=o[0],s=o[1];return i.a.createElement(ge.a,{ref:l,style:{opacity:r,margin:"10px",backgroundColor:u?"#4c4c4c":"#222",minWidth:0},onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}},i.a.createElement(Oe.a,{style:{minWidth:0}},i.a.createElement("div",{style:{minWidth:0}},i.a.createElement(je.a,null,t.sourceKey),i.a.createElement(Ft,{lineCount:2,containerStyle:{color:"#989898",fontSize:13}},t.exampleSourceValue))))},Pt=a(132),Ht=a(270),zt="business-mapper-source",Jt=Object.freeze({directory_category:"categories[]",post_content:"description",location_address__city:"location[]",location_address__address:"address",location_address__lat:"coordinates.latitude",location_address__lng:"coordinates.longitude",post_title:"name",field_email:"email[]",field_phone:"phoneNumber",field_social_accounts__facebook:"socialMedia.facebook",field_social_accounts__flickr:"socialMedia.flickr",field_social_accounts__googleplus:"socialMedia.googlePlus",field_social_accounts__instagram:"socialMedia.instagram",field_social_accounts__linkedin:"socialMedia.linkedIn",field_social_accounts__pinterest:"socialMedia.pinterest",field_social_accounts__rss:"socialMedia.rss",field_social_accounts__tumblr:"socialMedia.tumblr",field_social_accounts__twitter:"socialMedia.twitter",field_social_accounts__youtube:"socialMedia.youtube",field_website:"website"}),Kt=Object.values(Jt),Gt=Object(I.a)((function(){return{root:{margin:"15px"},button:{margin:"15px"},gridContainer:{margin:"50px",display:"grid",gridTemplateColumns:"1fr 3fr",width:"85%",gridColumnGap:"100px",gridRowGap:"15px"},gridHeaderContainer:{display:"flex",justifyContent:"center"},gridHeader:{color:"white",fontSize:26},gridLeft:{gridColumnStart:"1"},gridRight:{gridColumnStart:"2"}}})),Yt=function(e){for(var t={},a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];"undefined"!==typeof Jt[r]&&(t[Jt[r]]={sourceKey:r,exampleSourceValue:e[r],type:zt})}return t},$t=function(e){var t=i.a.useState(Yt(e.providedSources)),a=Object(f.a)(t,2),n=a[0],r=a[1],c=i.a.useState(!1),o=Object(f.a)(c,2),u=o[0],s=o[1],d=Gt(Object(W.a)()),m=Object(l.useCallback)((function(e){return!!Object.values(n).find((function(t){return t.sourceKey===e}))}),[n]),p=Object(l.useCallback)((function(e,t){if(!m(t.sourceKey)){var a=Object(h.a)({},n);a[e]=t,r(a)}}),[m,n]);return i.a.useEffect((function(){Object.keys(n).length===Object.keys(Jt).length&&s(!0)}),[]),i.a.useEffect(Object(l.useCallback)((function(){for(var t={},a=0,r=Object.keys(n);a<r.length;a++){var l=r[a];t[n[l].sourceKey]=l}e.onMappingChange(t)}),[n,e]),[n]),i.a.createElement(Ht.a,{backend:Pt.a},i.a.createElement("div",{className:d.root},i.a.createElement(A.a,{className:d.button,variant:"outlined",onClick:function(){r({})}},"Reset"),i.a.createElement(A.a,{className:d.button,variant:"outlined",onClick:function(){r(Yt(e.providedSources))}},"Auto-Map"),i.a.createElement("div",{className:d.gridContainer},i.a.createElement("div",{className:d.gridHeaderContainer},i.a.createElement(je.a,{className:d.gridHeader},"Source field name from CSV")),i.a.createElement("div",{className:d.gridHeaderContainer},i.a.createElement(je.a,{className:d.gridHeader},"Target field name in App")),Object.keys(e.providedSources).filter((function(e){return!m(e)})).map((function(t,a){return i.a.createElement("div",{className:d.gridLeft,style:{gridRow:a+2},key:a},i.a.createElement(Vt,{dropSource:{sourceKey:t,exampleSourceValue:e.providedSources[t],type:zt},isDropped:m(t)}))})),Object.values(Jt).sort((function(e,t){return n[e]&&n[t]||!n[e]&&!n[t]?Kt.indexOf(e)-Kt.indexOf(t):n[e]&&!n[t]?1:-1})).map((function(e,t){return i.a.createElement("div",{className:d.gridRight,style:{gridRow:t+2},key:t},i.a.createElement(Wt,{fieldName:e,accept:[zt],lastDroppedItem:n[e],onDrop:function(t){return p(e,t)},onRemove:function(e){var t=e.targetKey,a=Object(h.a)({},n);delete a[t],r(a)}}))})))),i.a.createElement(ce.a,{open:u,onClose:function(){return s(!1)}},i.a.createElement(oe.a,null,"Accept default mapping?"),i.a.createElement(ue.a,null,i.a.createElement(se.a,null,"Would you like to use the default field mapping? If you choose not to, you must ensure that all of the required fields in the mobile app are mapped to a field in the provided CSV export.")),i.a.createElement(de.a,null,i.a.createElement(A.a,{onClick:function(){return s(!1)},color:"secondary"},"No"),i.a.createElement(A.a,{onClick:function(){s(!1),e.next()},color:"secondary",autoFocus:!0},"Yes"))))},Qt=function(e){var t,a=Object(h.a)({},e);return at(a,(function(e){return"none"===e.toLowerCase().trim()})),a.categories=null===(t=a.categories)||void 0===t?void 0:t.flatMap((function(e){return e.split(";")})).map((function(e){return e.replace(/-/g," ")})).map((function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})).trim()})),a},Xt=a(272),Zt=a(273),ea=function(e){return function(t){var a=t?t.trim().split(/,\s*/):[];return"undefined"===typeof a[e]?null:a[e]}},ta=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Array(t).fill(0).map((function(t,a){return{key:"".concat(e,"[").concat(a,"]"),transform:ea(a)}}))},aa=Object.freeze({directory_category:ta("categories"),location__city:ta("location"),field_email:ta("email")}),na=Object(I.a)({root:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},footer:{width:"100%",display:"flex",marginTop:"auto"},buttonContainer:{marginLeft:"auto",padding:"30px"},contentContainer:{},backButton:{},instructions:{}}),ra=function(e){return new Promise((function(t,a){var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=Object(p.a)(m.a.mark((function e(){var a,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.result,r=new TextDecoder("utf-8"),e.next=4,bt()().fromString(r.decode(a));case 4:l=e.sent,t(l);case 6:case"end":return e.stop()}}),e)}))),n.readAsArrayBuffer(e)}))},la=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.csvMapping,r=a.fileContent,l=Object(h.a)(Object(h.a)({},n),aa),e.next=4,t.validateService(r.map((function(e){return Qt(ht.a.merge(e,l))})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ia=function(e){var t=e.converted,a=e.businessIndex,n=e.errorIndex;if(t){var r=t.unresolved[a].value,l=t.unresolved[a].error[n],i=l.context.value;l.updatesCommitted=!0,function(e,t,a,n){for(var r=0,l=e;r<a.length-1;)l=l[a[r]],r++;var i=t;if(i)switch(n){case rt:i=t.split(/,\s*/);break;case lt:i=parseInt(t);break;case nt:i=t}l[a[r]]=i}(r,i,l.path,l.valueType);var c=t.resolved.findIndex((function(e){return e.name===t.unresolved[a].value.name}));c>=0?t.resolved[c]=r:t.resolved.push(r)}return t};!function(e){e[e.File_Select=0]="File_Select",e[e.Map_Fields=1]="Map_Fields",e[e.Correct_Errors=2]="Correct_Errors",e[e.Verify_Upload=3]="Verify_Upload"}(Me||(Me={}));var ca=function(){var e=na(),t=Object(_.g)(),a=i.a.useContext(w),n=i.a.useState(Me.File_Select),r=Object(f.a)(n,2),l=r[0],c=r[1],o=i.a.useState(),u=Object(f.a)(o,2),s=u[0],d=u[1],v=i.a.useState(),b=Object(f.a)(v,2),E=b[0],g=b[1],y=i.a.useState(),x=Object(f.a)(y,2),O=x[0],j=x[1],k=i.a.useState(0),S=Object(f.a)(k,2),C=S[0],N=S[1],U=i.a.useState(),T=Object(f.a)(U,2),L=T[0],I=T[1],B=i.a.useState(!1),M=Object(f.a)(B,2),F=M[0],W=M[1],q=(null===O||void 0===O?void 0:O.unresolved.filter((function(e){return e.error.some((function(e){return!e.updatesCommitted}))})).length)||0,P=["File Select","Map Fields","Correct errors".concat(q>0?" (".concat(q,")"):""),"Verify Content"],H=function(){var e=Object(p.a)(m.a.mark((function e(){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=l,e.next=e.t0===Me.File_Select?3:e.t0===Me.Map_Fields?11:e.t0===Me.Correct_Errors?20:e.t0===Me.Verify_Upload?22:28;break;case 3:return W(!0),e.next=6,ra(s);case 6:return r=e.sent,g(r),W(!1),c(Me.Map_Fields),e.abrupt("break",28);case 11:if(W(!0),!a.adminServices){e.next=18;break}return e.next=15,la(a.adminServices,{csvMapping:L,fileContent:E});case 15:i=e.sent,j(i),c(i.unresolved.length>0?Me.Correct_Errors:Me.Verify_Upload);case 18:return W(!1),e.abrupt("break",28);case 20:return c(Me.Verify_Upload),e.abrupt("break",28);case 22:return W(!0),e.next=25,null===(n=a.adminServices)||void 0===n?void 0:n.uploadBusinesses(null===O||void 0===O?void 0:O.resolved);case 25:return W(!1),t.push("/businesses"),e.abrupt("break",28);case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i.a.useEffect((function(){return console.log(O)}),[O]);return i.a.createElement("div",{className:e.root},i.a.createElement(Ne.a,{activeStep:l,alternativeLabel:!0},P.map((function(e){return i.a.createElement(Ue.a,{key:e},i.a.createElement(_e.a,null,e))}))),i.a.createElement("div",{className:e.contentContainer},function(e){var t,a,n;switch(e){case Me.File_Select:return i.a.createElement(Tt,{handleNext:H,setSelectedFile:d,selectedFile:s});case Me.Map_Fields:return i.a.createElement($t,{next:H,providedSources:null===E||void 0===E?void 0:E[0],onMappingChange:I});case Me.Correct_Errors:return i.a.createElement("div",{style:{display:"flex",width:"100%"}},i.a.createElement(dt.a,{style:{flex:1,backgroundColor:D.cardBackground}},null===O||void 0===O?void 0:O.unresolved.map((function(e,t){return i.a.createElement(mt.a,{key:t.toString(),button:!0,selected:t===C,onClick:function(){return N(t)}},i.a.createElement(pt.a,null,i.a.createElement(je.a,{style:{color:D.text}},e.value.name)),i.a.createElement(ft.a,null,e.error.some((function(e){return!e.updatesCommitted}))?i.a.createElement(Xt.a,{style:{color:D.text}}):i.a.createElement(Zt.a,{style:{color:D.lightAccent}})))}))),i.a.createElement("div",{style:{flex:5}},i.a.createElement(At,{errors:null===O||void 0===O||null===(t=O.unresolved[C])||void 0===t?void 0:t.error,onUpdate:function(e,t){var a=Object(h.a)({},O);a.unresolved[C].original||(a.unresolved[C].original=JSON.parse(JSON.stringify(a.unresolved[C].value))),a.unresolved[C].error[t].context.value=e,j(a)},onSave:function(){var e=Object(h.a)({},O);e.unresolved[C].error.forEach((function(t,a){ia({converted:e,businessIndex:C,errorIndex:a});var n=C+1;N(n),j(e),(!(null===e||void 0===e?void 0:e.unresolved)||n>=e.unresolved.length)&&c(Me.Verify_Upload)}))},onReset:function(){var e=Object(h.a)({},O);e.unresolved[C].error.forEach((function(e){e.context.value=e.context.originalValue,e.updatesCommitted=!1})),e.unresolved[C].value=e.unresolved[C].original;var t=e.resolved.findIndex((function(t){return t.name===e.unresolved[C].value.name}));t>0&&e.resolved.splice(t,1),j(e)},name:null===O||void 0===O||null===(a=O.unresolved[C])||void 0===a?void 0:a.value.name,details:null===O||void 0===O||null===(n=O.unresolved[C])||void 0===n?void 0:n.value})));case Me.Verify_Upload:return i.a.createElement(Dt,{count:null===O||void 0===O?void 0:O.resolved.length,unresolvedCount:q});default:return"How did this happen"}}(l)),i.a.createElement("div",{className:e.footer},i.a.createElement("div",{className:e.buttonContainer},i.a.createElement(A.a,{style:{marginRight:"10px"},disabled:l===Me.File_Select,onClick:function(){return c(Math.max(l-1,0))},className:e.backButton},"Back"),i.a.createElement(A.a,{variant:"contained",color:"primary",onClick:H},l===Me.Verify_Upload?"Upload":l===Me.Correct_Errors?"Continue to Upload":"Next"))),i.a.createElement(V.a,{style:{zIndex:0,color:"#fff"},open:F},i.a.createElement(R.a,{color:"inherit"})))},oa=function(){return i.a.createElement(_.d,null,i.a.createElement(L,{path:"/login",exact:!0,component:M}),i.a.createElement(T,{path:"/businesses",exact:!0,component:ie}),i.a.createElement(T,{path:"/sync",exact:!0,component:ca}),i.a.createElement(T,{path:"/addBusiness",exact:!0,component:ct}),i.a.createElement(T,{path:"/users",exact:!0,component:he}),i.a.createElement(T,{path:"/newsfeed",exact:!0,component:we}),i.a.createElement(T,{path:"/addNewsfeed",exact:!0,component:st}),i.a.createElement(_.b,{component:function(){return i.a.createElement(_.a,{to:"/businesses"})}}))},ua=a(97),sa=a(130),da=a(245),ma=Object(I.a)({root:{},title:{marginRight:"50px"},button:{marginLeft:"10px"}}),pa=function(){var e=ma(),t=Object(_.g)(),a=i.a.useContext(w);return i.a.createElement("div",{className:e.root},i.a.createElement(gt.a,{position:"static"},i.a.createElement(da.a,null,a.authenticated&&i.a.createElement(X.a,{style:{width:"100%"},container:!0},i.a.createElement(X.a,{item:!0,xs:"auto"},i.a.createElement(A.a,{color:"secondary",className:e.button,onClick:function(){return t.push("/businesses")}},"Businesses")),i.a.createElement(X.a,{item:!0,xs:"auto"},i.a.createElement(A.a,{color:"secondary",className:e.button,onClick:function(){return t.push("/newsfeed")}},"Newsfeed")),i.a.createElement(X.a,{item:!0,xs:"auto"},i.a.createElement(A.a,{color:"secondary",className:e.button,onClick:function(){return t.push("/users")}},"Users"))),i.a.createElement(A.a,{variant:"outlined",disabled:!a.authenticated||a.authorizing,onClick:a.signOut,style:{marginLeft:"auto"}},"Logout"))))},fa=a(22),va=Object(u.a)({palette:{type:"dark",primary:{main:"#2b2828",light:"rgb(81, 91, 95)",dark:"rgb(26, 35, 39)",contrastText:"#ffffff"},secondary:{main:"#FFB74D",light:"rgb(255, 197, 112)",dark:"rgb(200, 147, 89)",contrastText:"rgba(0, 0, 0, 0.87)"},error:{main:ua.a.A400}}}),ba=Object(I.a)({app:{height:"100%",display:"flex",flexDirection:"column"}});var Ea=function(){var e=ba();return i.a.createElement(s.a,{theme:va},i.a.createElement(fa.a,{utils:sa.a},i.a.createElement(U,null,i.a.createElement(w.Consumer,null,(function(){return i.a.createElement("div",{className:e.app},i.a.createElement(pa,null),i.a.createElement(oa,null))})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ha=a(36);o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ha.a,null,i.a.createElement(Ea,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[161,1,2]]]);
//# sourceMappingURL=main.c0692c07.chunk.js.map